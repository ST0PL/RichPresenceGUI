<UserControl x:Class="RichPresenceGUI.Views.FieldsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:RichPresenceGUI.Views"
             xmlns:clib="clr-namespace:ControlsLib.Controls;assembly=ControlsLib"
             xmlns:prop="clr-namespace:ControlsLib.AttachedProperties;assembly=ControlsLib"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1300">
    <UserControl.RenderTransform>
        <TranslateTransform X="0" Y="0"/>
    </UserControl.RenderTransform>
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.Y)"
                                     From="20"
                                     To="0"
                                     Duration="0:0:0.2"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
    <Grid Margin="0,10,0,0"
          HorizontalAlignment="Center">
        <Grid.RowDefinitions>
            <RowDefinition Height="75"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Border Background="{DynamicResource BlockBackground}"
                Width="265"
                CornerRadius="5"
                Margin="5,0,0,0"
                VerticalAlignment="Bottom"
                HorizontalAlignment="Left">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center">
                <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                              Text="{Binding ApplicationId, UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding IsConnected, Converter={StaticResource inverseBoolConverter}}"
                              Margin="5"
                              HorizontalAlignment="Left"
                              Title="{DynamicResource fields_appId}" />
            </StackPanel>
        </Border>
        <clib:ScrollViewer Style="{StaticResource ScrollViewerStyle}"
                           Margin="0,5,0,0"
                           Grid.Row="1"
                           VerticalScrollBarVisibility="Auto">
            <WrapPanel Grid.Row="1"
                       Orientation="Horizontal"
                       prop:PanelChildrenProperties.Margin="5">
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Style="{StaticResource Fields_BlockLabelStyle}" 
                               Content="{DynamicResource fields_general_components}"/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_details}"
                                      Text="{Binding Details}"/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_state}"
                                      Text="{Binding State}"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Content="{DynamicResource fields_large_image}"
                               FontWeight="SemiBold"
                               FontSize="15"
                               Foreground="{DynamicResource BaseTextColor}"
                               Opacity="0.7" Cursor=""/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding LargeImageKey}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_image_key}" />
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding LargeImageText}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_image_text}"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Content="{DynamicResource fields_small_image}"
                               FontWeight="SemiBold"
                               FontSize="15"
                               Foreground="{DynamicResource BaseTextColor}"
                               Opacity="0.7" Cursor=""/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding SmallImageKey}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_image_key}"/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding SmallImageText}"
                                      MaxLength="128"
                                      Title="{DynamicResource fields_image_text}" />
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Style="{StaticResource Fields_BlockLabelStyle}"
                               Content="{DynamicResource fields_party}"/>
                        
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding Size, UpdateSourceTrigger=PropertyChanged}"
                                      Title="{DynamicResource fields_size}"/>
                        
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding Max, UpdateSourceTrigger=PropertyChanged}"
                                      Title="{DynamicResource fields_max}"/>

                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Style="{StaticResource Fields_BlockLabelStyle}"
                               Content="{DynamicResource fields_timestamps}"/>
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding StartTimestamp, UpdateSourceTrigger=PropertyChanged}"
                                      Title="{DynamicResource fields_start}"/>
                        <clib:CheckBox x:Name="nowOffsetCheckBox"
                                       Style="{StaticResource CheckBoxStyle}"
                                       IsChecked="{Binding IsNowOffset}"
                                       Title="{DynamicResource fields_now_offset}"
                                       IsEnabled="{Binding ElementName=startOffsetCheckBox, Path=IsChecked, Converter={StaticResource inverseBoolConverter}}"
                                       Margin="1,5,1,0"/>
                        
                        <clib:TextBox Style="{StaticResource Fields_BlockTextBoxStyle}"
                                      Text="{Binding EndTimestamp, UpdateSourceTrigger=PropertyChanged}"
                                      Title="{DynamicResource fields_end}"/>
                        
                        <clib:CheckBox x:Name="startOffsetCheckBox"
                                       Style="{StaticResource CheckBoxStyle}"
                                       IsChecked="{Binding IsStartOffset}"
                                       Title="{DynamicResource fields_start_offset}"
                                       IsEnabled="{Binding ElementName=nowOffsetCheckBox, Path=IsChecked, Converter={StaticResource inverseBoolConverter}}"
                                       Margin="1,5,1,0"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Style="{StaticResource Fields_BlockLabelStyle}"
                               Content="{DynamicResource fields_buttons}"/>
                        <clib:Button Style="{StaticResource ClassicButtonStyle}"
                                     IsEnabled="{Binding IsAddButtonEnabled}"
                                     Command="{Binding AddButtonCommand}"
                                     VerticalAlignment="Bottom"
                                     Grid.Row="2"
                                     Margin="0,10,0,0"
                                     CornerRadius="5"
                                     Height="30"
                                     HorizontalAlignment="Stretch"
                                     Content="{DynamicResource fields_addButton}"
                                     FontSize="15"
                                     BorderThickness="0"/>
                        <clib:ListView Style="{StaticResource ListViewStyle}"
                                       ScrollViewer.VerticalScrollBarVisibility="Visible"
                                       AlternationCount="2"
                                       ItemsSource="{Binding Buttons}"
                                       HorizontalContentAlignment="Stretch"
                                       VerticalAlignment="Top"
                                       Margin="0,5,0,0"
                                       MaxHeight="200">
                            <clib:ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource DButtonBlockBackground}"
                                            CornerRadius="5"
                                            HorizontalAlignment="Stretch"
                                            Padding="10">
                                        <StackPanel>
                                            <Grid>
                                                <TextBlock FontWeight="SemiBold"
                                                           VerticalAlignment="Center"
                                                           Opacity="0.8"
                                                           Foreground="{DynamicResource BaseTextColor}"
                                                           FontSize="15">
                                                    <Run Text="{DynamicResource fields_button}"/>
                                                    <Run Text="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}, Path=(ItemsControl.AlternationIndex), Mode=OneWay, Converter={StaticResource increaseConverter}}"/>
                                                </TextBlock>
                                                <clib:Button Style="{DynamicResource RedButtonStyle}"
                                                             CommandParameter="{Binding}"
                                                             Command="{Binding RelativeSource={RelativeSource AncestorType=clib:ListView}, Path=DataContext.RemoveButtonCommand}" 
                                                             HorizontalAlignment="Right"
                                                             VerticalAlignment="Bottom"
                                                             Grid.Row="2"
                                                             Width="80"
                                                             CornerRadius="5"
                                                             Height="30"
                                                             Content="{DynamicResource fields_removeButton}"
                                                             FontSize="15"/>
                                            </Grid>
                                            <clib:TextBox Style="{StaticResource TextBoxStyle}"
                                                          Text="{Binding Label, UpdateSourceTrigger=PropertyChanged}"
                                                          MaxWidth="214"
                                                          HorizontalAlignment="Stretch"
                                                          Margin="0,5,0,0"
                                                          Title="{DynamicResource fields_button_label}"
                                                          TitleOpacity="1"/>
                                            <clib:TextBox Style="{StaticResource TextBoxStyle}"
                                                          Text="{Binding Url, UpdateSourceTrigger=PropertyChanged}"
                                                          MaxWidth="214"
                                                          Title="{DynamicResource fields_button_url}"
                                                          TitleOpacity="1"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </clib:ListView.ItemTemplate>
                        </clib:ListView>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource Fields_BlockBorderStyle}">
                    <StackPanel Orientation="Vertical">
                        <Label Style="{StaticResource Fields_BlockLabelStyle}"
                               Content="{DynamicResource fields_activityType}"/>
                        <clib:ComboBox Style="{StaticResource FieldsComboBoxStyle}"
                                       SelectedValue="{Binding CurrentActivityType}"
                                       ItemsSource="{Binding ActivityTypes}">
                            <clib:ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={StaticResource enumLocaleConverter}}"/>
                                </DataTemplate>
                            </clib:ComboBox.ItemTemplate>
                        </clib:ComboBox>
                        <Label Style="{StaticResource Fields_BlockLabelStyle}"
                               Content="{DynamicResource fields_statusDisplayType}"
                               Width="250"/>
                        <clib:ComboBox Style="{StaticResource FieldsComboBoxStyle}"
                                       SelectedValue="{Binding CurrentStatusDisplayType}"
                                       ItemsSource="{Binding StatusDisplayTypes}">
                            <clib:ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={StaticResource enumLocaleConverter}}"/>
                                </DataTemplate>
                            </clib:ComboBox.ItemTemplate>
                        </clib:ComboBox>
                    </StackPanel>
                </Border>
            </WrapPanel>
        </clib:ScrollViewer>
        <Grid x:Name="bottomGrid"
              Grid.Row="2"
              Margin="10,10,10,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal"
                        Margin="0,0,0,10">
                <clib:Button Style="{StaticResource DisconnectButtonStyle}"
                             CornerRadius="10"
                             Height="40"
                             Padding="5"
                             Content="{DynamicResource fields_disconnect}"
                             FontSize="15"
                             Command="{Binding DisconnectCommand}"/>
                <clib:Button Style="{DynamicResource ConnectButtonStyle}"
                             Margin="10,0,0,0"
                             CornerRadius="10"
                             Height="40"
                             Padding="5"
                             Content="{DynamicResource fields_connect}"
                             FontSize="15"
                             Command="{Binding ConnectCommand}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Grid.Column="1"
                        Grid.Row="1"
                        Margin="0,0,0,10">
                <clib:Button Style="{StaticResource ClassicButtonStyle}"
                             Command="{Binding SaveTemplateCommand}"
                             Content="{DynamicResource fields_saveTemplate}"
                             CornerRadius="10"
                             Height="40"
                             Padding="5"
                             FontSize="15"/>
                <clib:Button Style="{StaticResource ClassicButtonStyle}"
                             Command="{Binding UpdatePresenceCommand}"
                             Margin="10,0,0,0"
                             CornerRadius="10"
                             Height="40"
                             Padding="5"
                             Content="{DynamicResource fields_updatePresence}"
                             FontSize="15"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
